<p align="center">
  <img src="src/assets/logo.svg" alt="BarNotation Logo" width="350"/>
</p>

<p align="center"><em>The mathematical note-taking app that truly raises the bar</em> üòé</p>


# BarNotation

BarNotation is a real-time math note-taking app designed especially for students with hand pain in fast-paced lecture settings where writing detailed mathematical notation by hand can be painful and inefficient. An app like this is necessary because existing solutions (as far as I have found) do not allow complex structures such as actuarial symbols, nor do they provide easily customizable solutions to re-using sub-expressions. 

BarNotation enables users to build their notes as a sequence of "cells", either *Text* or *Math*, with intuitive keyboard entry, structural transformations, and drag-and-drop support for editing, reordering, and organizing notes and math expressions.

<p align="center">
  <img src="readme-images/screenshot-random-use.png" alt="Random usage screenshot of the editor" width="540"/>
</p>

<p align="center">
  <em>See the <a href="#-screenshots">üì∑ Screenshots</a> section for a visual walkthrough!</em>
</p>

---

> ‚ö†Ô∏è **WARNING: This app is NOT production-ready. It is unstable, untested, and under heavy development. Proper database design has been procrastinated, and due to an unfortunate lack of experience developing apps like this, performance optimization is an afterthought (where after = now üò≠).**

---

## ‚ú® Features

- **Cell-based note-taking**: Compose your notes as a series of *Math* and *Text* cells, inspired by the feel of a [Jupyter notebook](https://jupyter.org/).
- **Tree-structured Math Cells**: Math cells store structured math expressions using a node tree, with different node types corresponding to unique visual structures found in mathematics.
- **Smart Typing & Shortcuts**:
  - Type to insert basic (textual, inline) math
  - Use **hotkeys** (e.g. `/`) and **command sequences** (e.g. `\sum`, `\angl`, `\sqrt`) to transform input into fractions, sums, actuarial symbols, and more
- **Drag-and-Drop**:
  - Move math nodes within a cell
  - Copy math nodes across cells
  - Reorder notebook cells
- **Math Snippet Library**:
  - Save reusable math expressions to your personal **Library**
  - Drag entries from the library into any math cell
  - Create your own collections within the library, or use the premade ones
  - Copy expressions across collections by dragging them into other library tabs
  - Library entries are persistent and accessible across notebooks
  - Re-order the library tabs how you want and archive ones you don't need right now
- **LaTeX Integration**:
  - View the LaTeX translation of math cells
  - Copy LaTeX with `Ctrl+C`
  - Drag math snippets directly into external LaTeX editors like [Overleaf](https://www.overleaf.com/)

---

## üß± Supported Math Structures

BarNotation supports a growing list of structured math elements:

| **Type**                | **Node Interface**    | **Description**                                                                                                           | &nbsp; &nbsp; **Render Preview**&nbsp; &nbsp; | **How to Obtain**                                      |
| ----------------------- | --------------------- | ------------------------------------------------------------------------------------------------------------------------- | -------------------------- | ------------------------------------------------------ |
| `text`                  | `TextNode`            | A single character or rendered special symbol.                                                                            | <div align="center"><img src="readme-images/node-type-render-screenshots/render-text.png" alt="Text node example" width="100" /></div> | Type directly |
| `multi-digit`           | `MultiDigitNode`      | A sequence of digit `TextNode`s treated as one number.                                                                    | <div align="center"><img src="readme-images/node-type-render-screenshots/render-multidigit.png" alt="Multi-digit example" width="100" /></div> | Type multiple digits in a row |
| `command-input`         | `CommandInputNode`    | A sequence representing a LaTeX command. Turns into another node type when your sequence matches a known one.             | <div align="center"><img src="readme-images/node-type-render-screenshots/render-command.png" alt="Command input example" width="100" /></div> | Start with `\` and type a sequence |
| `styled`                | `StyledNode`          | An expression with non-standard font. Some commands like `\lim ` automatically lead to styled "lim" (just like LaTeX).    | <div align="center"><img src="readme-images/node-type-render-screenshots/render-styled.png" alt="Styled node example" width="100" /></div> | E.g. `\upright `, `\text ` |  
| `root-wrapper`          | `RootWrapperNode`     | Holds your math cell's expression, used in toLatex to turn it into a block equation.                                      | (None)| Auto-created once per MathCell |
| `inline-container`      | `InlineContainerNode` | Container for an expression (sequence of nodes).                                                                          | <div align="center"><img src="readme-images/node-type-render-screenshots/render-ic.png" alt="Inline container example" width="100" /></div> | For every transform that leads to new child nodes, child is inline-container |
| `group`                 | `GroupNode`           | Bracketed expression.                                                                                                     | <div align="center"><img src="readme-images/node-type-render-screenshots/render-group.png" alt="Group node example" width="100" /></div> | Type brackets. App recognizes when pair is found |
| `fraction`              | `FractionNode`        | A fraction with numerator and denominator.                                                                                | <div align="center"><img src="readme-images/node-type-render-screenshots/render-frac.png" alt="Fraction example" width="100" /></div> | `/` or `\frac `|  
| `nth-root`              | `NthRootNode`         | A root with an optional index.                                                                                            | <div align="center"><img src="readme-images/node-type-render-screenshots/render-sqrt.png" alt="Nth root example" width="100" /></div> | Type `\sqrt` |
| `big-operator`          | `BigOperatorNode`     | Operators with upper/lower bounds like `‚àë`, `‚àè`.                                                                          | <div align="center"><img src="readme-images/node-type-render-screenshots/render-bigop.png" alt="Big operator example" width="100" /></div> | E.g. `\sum `, `\int ` |
| `childed`               | `ChildedNode`         | Sub/superscript left or right of base, jump to new child depending on applied shortcut. Left side only reached by cursor. | <div align="center"><img src="readme-images/node-type-render-screenshots/render-subsup.png" alt="Sub/superscript example" width="100" /></div> | `^` (= `Shift` + `6`) or `_` (= `Shift` + `-`) |
| `actsymb`               | `ChildedNode`         | Actuarial-style notation, same as above but app knows to use latex syntax as defined by the `\actuarialsymbol` package.   | <div align="center"><img src="readme-images/node-type-render-screenshots/render-actsymb.png" alt="Actuarial symbol example" width="100" /></div> | `Side` + `height`, where `Side` is [`Shift` + `Ctrl` (left) or `Alt` (right)] and `height` is [`6` (up) or `-` (down)]
| `accented` (predefined) | `AccentedNode`        | Decorations above or below. | <div align="center"><img src="readme-images/node-type-render-screenshots/render-angl.png" alt="Predefined accent example" width="100" /></div> | Type commands like `\hat`, `\angl`, `\bar` |
| `accented` (custom)     | `AccentedNode`        | Custom over/under annotations (overset/underset).                                                                         | <div align="center"><img src="readme-images/node-type-render-screenshots/render-underset.png" alt="Custom accent example" width="100" /></div> | `Shift` + `ArrowUp` or `ArrowDown` |

## üì∑ Screenshots

### üìù Main Editing Interface  
A simple, cell-based interface for math and text. Drag, type, and transform as you go.

<p align="center">
  <img src="readme-images/screenshot-editing.png" alt="BarNotation editing interface showing math and text cells" width="700"/>
</p>

### üìö Drag-and-Drop Math Library  
Save any expression for reuse. Just drag it into the library panel, and back into cells whenever you need!

<p align="center">
  <img src="readme-images/gif-library-dragging.gif" alt="Dragging math expressions to and from the library" width="450"/>
</p>

> ü§ì **Fun fact!**  
> The library keeps track of how often you re-use each snippet, so you can sort by "most used" (among others)!  
> Interested in seeing exact counts? Turn on **_nerd mode_** in settings.

### üß© Build Your Own Collections  
Create your own custom collections! Copy math from notes, or **drag between tabs**.

<p align="center">
  <img src="readme-images/gif-new-collection.gif" alt="Creating a new custom math collection" width="450"/>
</p>

### üóÇÔ∏è Power Features for Collections

#### ‚ÜïÔ∏è Reorder Collection Tabs  
Just drag to rearrange!

<p align="center">
  <img src="readme-images/cursor-screenshot-reorder-tabs.png" alt="Reordering collection tabs" width="700"/>
</p>

#### üì• Archive Collections You‚Äôre Not Using  
Wildly different courses this semester, but expect similar ones in the future? Archive your collections to de-clutter your workspace!

<p align="center">
  <img src="readme-images/cursor-screenshot-collection-dropdown.png" alt="Dropdown for archiving math collections" width="600"/>
</p>

#### üß≠ View and Restore Archived Collections  
Searchable, previewable, and manageable. Even if you named a dozen of them "My Collection".

<p align="center">
  <img src="readme-images/screenshot-find-collections-archive.png" alt="Accessing collection archive" width="320"/>
  &nbsp;&nbsp;&nbsp;
  <img src="readme-images/screenshot-collections-archive.png" alt="Archive modal for restoring and previewing collections" width="320"/>
</p>

<p align="center"><i>Browse and restore from the archive (with previews!)</i></p>


### üìú Preview Mode  
Check how your note would roughly render in LaTeX.

<p align="center">
  <img src="readme-images/screenshot-preview-mode.png" alt="Preview mode showing LaTeX output" width="700"/>
</p>

### üåç LaTeX In and Out  
Hate my app, but enjoy the math library? No problem! Just drag your snippets straight into any LaTeX editor (here: [Overleaf](https://www.overleaf.com/))!

<p align="center">
  <img src="readme-images/gif-external-latex.gif" alt="Dragging math expressions into an external LaTeX editor" width="450"/>
</p>

And yes, dragging raw LaTeX into the library works too! Just drop LaTeX code and it gets converted into structured math.

## üìÅ Project Structure

The app is built in **React** with **TypeScript** and uses **Vite** as the build tool.

<details>
<summary><strong>Click to view full file tree</strong></summary>

```
.
‚îú‚îÄ‚îÄ App.tsx                        # Root app wrapper, renders main layout
‚îú‚îÄ‚îÄ index.css                      # Tailwind import, unused elsewhere
‚îú‚îÄ‚îÄ main.tsx                       # Loads App in React.StrictMode
‚îú‚îÄ‚îÄ vite-env.d.ts                  # Vite environment type declarations
‚îÇ
‚îú‚îÄ‚îÄ assets
‚îÇ   ‚îî‚îÄ‚îÄ logo.svg                   # Full logo used in MainHeaderBar
‚îÇ
‚îú‚îÄ‚îÄ components
‚îÇ   ‚îú‚îÄ‚îÄ cells                      # Core editor cell components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ BaseCell.tsx           # Shared logic for Math/Text cells
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ InsertCellButtons.tsx  # UI for adding new Math/Text cells
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MathCell.tsx           # MathEditor cell 
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ TextCell.tsx           # Textarea cell
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ common                     # General reusable UI components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SearchBar.tsx          # Styled search bar component
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SearchBar.module.css   # Styling for search bar
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ToastProvider.tsx      # Global toast/alert handler
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ toast.module.css       # Styling for toast alerts
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ editor                     # Main math note editor pane
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ EditorHeaderBar.tsx    # Toolbar for math editor (zoom, latex toggle, etc)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ EditorPane.tsx         # Handles cell list and editor pane state
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ NotationEditor.tsx     # Renders the math/text cell list (1 notebook)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ NoteMetadataSection.tsx # Title, author, date metadata
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ *.module.css           # CSS modules for components above
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ icons
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CollapseIcon.tsx       # Arrow icon for collapsing UI sections
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ layout                     # Page-level layout components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ EditorWorkspace.tsx    # Wraps EditorPane and MathLibrary (also drag context)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MainHeaderBar.tsx      # Header bar with logo/settings/etc
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MainLayout.tsx         # Page layout: header, sidebar, workspace
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ResizableSidebar.tsx   # Resizable note history/sidebar component
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ *.module.css           # Styling for layout components
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ mathExpression             # Math editor internals
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MathEditor.tsx         # Interactive math input component (1 expression)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MathRenderer.tsx       # Recursive renderer with interactivity
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MathRenderers.tsx      # Specific renderers for each MathNode type
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MathView.tsx           # Non-interactive renderer (e.g. in Library)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ LatexViewer.tsx        # Shows raw LaTeX output for 1 expression
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DummyStartNodeRenderer.tsx # Dummy node for beginning of container
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ *.module.css           # Styling for math display components
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ mathLibrary                # Math library for saved/prebuilt nodes
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MathLibrary.tsx        # Displays saved/standard math expressions
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TabDropdownPortal.tsx  # Dropdown for library tab actions
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ *.module.css           # Styling for library panel
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ modals                     # Overlay modal components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ HotkeyOverlay.tsx      # Overlay with keyboard shortcuts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ LibCollectionArchiveModal.tsx # Archive/restore library collection
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SettingsModal.tsx      # Overlay for user settings/preferences
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ *.module.css           # Styling for modals
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ notesMenu                  # Note switching and actions UI
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ NotesMenu.tsx          # Sidebar for switching between notes
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ NoteActionsDropdown.tsx # Dropdown for rename/delete note
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ *.module.css           # Styling for menu components
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ tooltips
‚îÇ       ‚îú‚îÄ‚îÄ Tooltip.tsx            # Tooltip wrapper for hover hints
‚îÇ       ‚îî‚îÄ‚îÄ tooltip.css            # Tooltip styling
|
‚îú‚îÄ‚îÄ constants
‚îÇ   ‚îî‚îÄ‚îÄ premadeMathCollections.ts  # Initial math collections for library
‚îÇ
‚îú‚îÄ‚îÄ hooks                         # Shared hooks and contexts
‚îÇ   ‚îú‚îÄ‚îÄ DragContext.ts             # Global drag context types
‚îÇ   ‚îú‚îÄ‚îÄ DragProvider.tsx           # Provides drag context
‚îÇ   ‚îú‚îÄ‚îÄ useDragContext.ts          # Access drag context
‚îÇ   ‚îú‚îÄ‚îÄ useCellDragState.ts        # Drag state hook for cells
‚îÇ   ‚îú‚îÄ‚îÄ useDragState.ts            # Node drag state (OUTDATED)
‚îÇ   ‚îú‚îÄ‚îÄ EditorHistoryContext.tsx   # Global editor history context
‚îÇ   ‚îú‚îÄ‚îÄ EditorHistoryProvider.tsx  # Provides history context
‚îÇ   ‚îú‚îÄ‚îÄ useEditorHistory.ts        # Local editor history hook (OUTDATED)
‚îÇ   ‚îú‚îÄ‚îÄ useHoverState.ts           # Hover state for math nodes
‚îÇ   ‚îú‚îÄ‚îÄ useZoom.ts                 # MathEditor zoom state hook
‚îÇ   ‚îú‚îÄ‚îÄ toastContext.ts            # Toast context provider
‚îÇ   ‚îî‚îÄ‚îÄ useToast.ts                # Hook for showing toasts
‚îÇ
‚îú‚îÄ‚îÄ logic                         # Math editor state and input logic
‚îÇ   ‚îú‚îÄ‚îÄ cursor.ts                  # Cursor position in expression tree
‚îÇ   ‚îú‚îÄ‚îÄ deletion.ts                # Handle backspace/delete logic
‚îÇ   ‚îú‚îÄ‚îÄ editor-state.ts            # Core editor state (node + cursor)
‚îÇ   ‚îú‚îÄ‚îÄ global-history.ts          # Full notebook history state
‚îÇ   ‚îú‚îÄ‚îÄ handle-keydown.ts          # Keyboard input handler
‚îÇ   ‚îú‚îÄ‚îÄ history.ts                 # (OUTDATED) local editor history
‚îÇ   ‚îú‚îÄ‚îÄ insertion.ts               # Text/char insertion logic
‚îÇ   ‚îú‚îÄ‚îÄ navigation.ts              # Arrow key navigation logic
‚îÇ   ‚îú‚îÄ‚îÄ node-manipulation.ts       # Insertion/deletion of nodes
‚îÇ   ‚îî‚îÄ‚îÄ transformations.ts         # Node transforms (e.g., fractionize)
‚îÇ
‚îú‚îÄ‚îÄ models                        # Data types and model logic
‚îÇ   ‚îú‚îÄ‚îÄ latexParser.ts             # Parse LaTeX into MathNode tree
‚îÇ   ‚îú‚îÄ‚îÄ libraryTypes.ts            # Types for saved library items
‚îÇ   ‚îú‚îÄ‚îÄ nodeFactories.ts           # MathNode constructors
‚îÇ   ‚îú‚îÄ‚îÄ nodeToLatex.ts             # Convert MathNode to LaTeX string
‚îÇ   ‚îú‚îÄ‚îÄ noteTypes.ts               # Note/Cell/Metadata type defs
‚îÇ   ‚îú‚îÄ‚îÄ specialSequences.ts        # Shortcuts like \frac ‚Üí FractionNode
‚îÇ   ‚îú‚îÄ‚îÄ transformations.ts         # Alternate transforms (legacy-ish)
‚îÇ   ‚îî‚îÄ‚îÄ types.ts                   # Core MathNode and variant types
‚îÇ
‚îú‚îÄ‚îÄ styles
‚îÇ   ‚îú‚îÄ‚îÄ accents.css                # Accent math node styling (hats, tildes, etc)
‚îÇ   ‚îú‚îÄ‚îÄ cells.css                  # Cell styling (insert zones, focus, etc)
‚îÇ   ‚îú‚îÄ‚îÄ hotkeyOverlay.css          # Hotkey overlay + settings shared styles
‚îÇ   ‚îú‚îÄ‚îÄ latexOutputColoring.css    # LaTeX viewer syntax highlighting
‚îÇ   ‚îú‚îÄ‚îÄ math-node.css              # Current math node styling
‚îÇ   ‚îú‚îÄ‚îÄ math-node-old.css          # Legacy math node styling (unused?)
‚îÇ   ‚îú‚îÄ‚îÄ math.css                   # Legacy general math styles
‚îÇ   ‚îú‚îÄ‚îÄ settings.css               # Styling for toggles/settings UI
‚îÇ   ‚îú‚îÄ‚îÄ styles.css                 # Global styles for layout and overlays
‚îÇ   ‚îî‚îÄ‚îÄ themes.css                 # Theme + DOM defaults + scrollbar overrides
‚îÇ
‚îî‚îÄ‚îÄ utils
    ‚îú‚îÄ‚îÄ accentUtils.ts             # Decorations for accented nodes + required packages
    ‚îú‚îÄ‚îÄ bracketUtils.ts            # Bracket types and characters
    ‚îú‚îÄ‚îÄ collectionUtils.ts         # Init functions for math collections
    ‚îú‚îÄ‚îÄ mathHoverUtils.ts          # Hover behavior for math nodes
    ‚îú‚îÄ‚îÄ navigationUtils.ts         # Cursor/child traversal logic
    ‚îú‚îÄ‚îÄ noop.ts                    # Empty function used in MathView (non-interative Math render)
    ‚îú‚îÄ‚îÄ subsupUtils.ts             # Sup/subscript position helpers
    ‚îú‚îÄ‚îÄ textContainerUtils.ts      # (Unused) splitting container logic
    ‚îî‚îÄ‚îÄ treeUtils.ts               # Tree update, find nodes, get logical children
```
</details>

---

## üöÄ Getting Started

### 1. Clone the repo
```bash
git clone https://github.com/Kayyleigh/BarNotation.git
cd BarNotation
```
### 2. Install Dependencies
```
npm install
```
### 3. Run the development server:
```
npm run dev
```
The app should now be running at http://localhost:5173.

--- 

## üß† Usage Tips

- **Insert a new cell**: Use the "+" buttons between or after cells, or in the editor header bar
- **Transform math**: Type a command like `\sqrt`, then hit space. Known commands are based on [LaTeX](https://www.cmor-faculty.rice.edu/~heinken/latex/symbols.pdf)!
- **Move/Copy math**: Drag elements directly within or between cells
- **Save reusable math**: Drag math to the Library panel on the right
- **Copy LaTeX**: `Ctrl+C` copies the LaTeX of the node left of your cursor
- **Reorder notes**: Drag the left margin of a cell up/down
- **External drag**: Drag snippets from the Library to apps like Overleaf. They paste as LaTeX!

---

## üîÆ Roadmap

Planned features and improvements include:

- üì¶ Full notebook export as LaTeX
- üéõÔ∏è Custom hotkeys
- üìö Hierarchical notebook sections (e.g., sections, subsections)
- üêõ Better error handling and onboarding experience

---

## üë©‚Äçüíª Contributing
This is my first time pushing a project of this size out into the world. However:
- The app is structured for extensibility, especially around:
  - Adding new math node types (though this part is not as easy as I planned; the latex parser is not very extensible right now)
  - Creating new cell types
  - Defining new command sequences
- Issues and feedback are appreciated!

---

## ü§ù Acknowledgements

- Built with [React](https://react.dev/), [TypeScript](https://www.typescriptlang.org/), and [Vite](https://vitejs.dev/)
- Math editing and rendering inspired by [LaTeX](https://www.latex-project.org/)
- Overall editor behavior, layout, and styling inspired by [Jupyter Notebook](https://jupyter.org/), [Overleaf](https://www.overleaf.com/), and [Visual Studio Code](https://code.visualstudio.com/) 


---

## üó£Ô∏è Feedback

Have ideas or suggestions? Found a bug?  
Please [open an issue](https://github.com/Kayyleigh/BarNotation/issues). Your feedback helps me improve!
